# HS Tibber

Dieser Baustein liest die Preise des Stromanbieters Tibber aus, um danach den Verbrauch zu steuern

**Noch in der Entwicklung!! -- und auch danach: Es wird keine Haftung/Gewährleistung übernommen!**

## Eingänge

| Nummer | Datentyp | Default | Beschreibung                                                                                               |
|--------|----------|---------|------------------------------------------------------------------------------------------------------------|
| 1      | Text     |         | Dein API Schlüssel                                                                                         |
| 2      | number   | 0       | Bei 1: Dinge werden in die Debug-Section geschrieben                                                       |
| 3      | number   | 4       | Suche nach ner günstigen Periode der Länge N                                                               |
| 4      | number   | 2       | Wird noch nicht verwendet: Suche nach der teustersten Periode der Länge N                                  |
| 5      | number   | 3       | Wird noch nicht verwendet: Pause in Stunden zwischen zwei Perioden                                         |
| 6      | number   | 0.015   | Wird noch nicht verwendet: Unterschied zw. dem Tages- und Periodenschnitt um als Günstig / Teuer zu gelten |


## Ausgänge

| Nummer | Beschreibung                                                                                                   |
|--------|----------------------------------------------------------------------------------------------------------------|
| 1      | Der aktuelle Preis in deiner Währung                                                                           |
| 2      | Unterschied zum Tages / Zwei-Tages Schnitt in % - Negativ ist günstiger als der Durchschnitt                   |
| 3      | Minimalpreis in den nächsten 2 Tagen                                                                           |
| 4      | Maximalpreis in den nächsten 2 Tagen                                                                           |
| 5      | Durchschnittspreis in den nächsten 2 Tagen                                                                     |
| 6      | Erste Stunde des Starts der günstigen Zeit (13 => 13:00 Uhr)                                                   |
| 7      | Letzte Stunde der günstigen Zeit (17 => 17:00 Uhr)                                                             |
| 8      | Günstige Zeit? 0: Nein, 1: Ja, jetzt ist gerade die günstige Zeit!                                             |
| 9      | Gibt die Preis-Infos der Schnittstelle als JSON zurück für heute                                               |
| 10     | Gibt die Preis-Infos der Schnittstelle als JSON zurück für morgen                                              |
| 11     | Sind Live-Daten verfügbar (Sagt nur, ob der Tarif Pulse oder ein iMS registriert hat, nicht ob dieses sendet!) |
| 12     | Aktueller Verbrauch in W                                                                                       |
| 13     | Aktuelle Einspeisung in W                                                                                      |
| 14     | Aktuelle Spannung L1 in Volt                                                                                   |
| 15     | Aktuelle Spannung L2 in Volt                                                                                   |
| 16     | Aktuelle Spannung L3 in Volt                                                                                   |
| 17     | Aktuelle Stromstärke L1 in Ampere                                                                              |
| 18     | Aktuelle Stromstärke L2 in Ampere                                                                              |
| 19     | Aktuelle Stromstärke L3 in Ampere                                                                              |
| 20     | Aktueller Tagesverbrauch in kWh                                                                                |
| 21     | Aktuelle Tageskosten in deiner Währung                                                                         |
| 22     | Zählerstand Verbrauch in kWh                                                                                   |
| 23     | Zählerstand Einspeisung in kWh                                                                                 |

# Debug-Mode

Nur wenn Debug-Eingang gesetzt wurde - zur Vermeidung von Kollisionen bei mehrfacher Verwendung von Write-Bausteinen.

Der Logikbaustein zeigt auch die RAW-Werte und weitere interne Werte im Debug-Fenster des Homeservers an. Dort sind auch
die letzten Fehler einzusehen:

1. Homeserver hslist aufrufen: https://[HS IP]/hslist
2. Listenschlüssel: `debug`, Username und Passwort von einem admin-User eingeben.
3. Unter *HSL2.0* oder *hs_tibber14464* die Fehler suchen oder die Werte überprüfen.

# Haftung / Gewährleistung

Es wird weder eine Haftung noch eine Gewährleistung übernommen. Für den Betrieb ist der Anlagenbetreiber bzw. Integrator
verantwortlich.

# Sourcecode / Weiterführende Doku

* Der Sourcecode ist auf Github zu finden: [hs_tibber](https://github.com/SvenBunge/hs_tibber)
* Der Baustein wird im KNX-Forum
  diskutiert: [Forum](https://knx-user-forum.de/forum/%C3%B6ffentlicher-bereich/knx-eib-forum/1842460-tibber-preise-auf-dem-homeserver)
* [Download](https://service.knx-user-forum.de/?comm=download&id=14464) des Bausteins übers KNX-Forum möglich.

# Lizenz & Faire Nutzung

* Der Baustein wird unter der LGPL 2.1 frei für die private Nutzung zur Verfügung gestellt.
* Die Nutzung des Logikbausteins ist für Endverbraucher frei, wenn sie diese selbst und selbstständig in Betrieb nehmen
  und konfigurieren. - Integratoren haben eine angemessene Aufwandsentschädigung zu leisten. Diese kann beim Autoren angefragt werden. 
* Freie Software heißt nicht freie Wartung & Support und geschieht auf freiwilliger Basis
* Es wird keine Gewährleistung noch Haftung für Schäden aus der Nutzung des Bausteins übernommen